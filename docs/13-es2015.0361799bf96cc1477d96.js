(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{LtjO:function(t,o,i){"use strict";i.r(o),i.d(o,"AllTripsPageModule",(function(){return g}));var e=i("ofXK"),n=i("3Pt+"),r=i("TEn/"),c=i("tyNb"),s=i("fXoL"),a=i("R7Hv"),b=i("xdv0");function l(t,o){1&t&&(s.Lb(0,"ion-grid"),s.Lb(1,"ion-row"),s.Lb(2,"ion-col",10),s.Jb(3,"ion-spinner",11),s.Kb(),s.Kb(),s.Kb())}const p=function(t){return["/trip-details",t]};function d(t,o){if(1&t&&(s.Lb(0,"ion-item",16),s.Lb(1,"ion-label",17),s.Lb(2,"h2"),s.ic(3),s.Kb(),s.Lb(4,"h5"),s.ic(5),s.Wb(6,"date"),s.Wb(7,"date"),s.Kb(),s.Lb(8,"p"),s.ic(9),s.Kb(),s.Lb(10,"p",18),s.ic(11),s.Kb(),s.Kb(),s.Kb()),2&t){const t=o.$implicit;s.yb(1),s.ac("routerLink",s.cc(12,p,t.tripId)),s.yb(2),s.jc(t.location),s.yb(2),s.lc(" ",s.Xb(6,6,t.dateFrom,"dd/MM/yyyy")," - ",s.Xb(7,9,t.dateTo,"dd/MM/yyyy")," "),s.yb(4),s.jc(t.description),s.yb(2),s.kc("\xa3",t.price,"")}}const u=function(){return["/trip-new"]};function m(t,o){if(1&t){const t=s.Mb();s.Lb(0,"ion-grid"),s.Lb(1,"ion-row"),s.Lb(2,"ion-col",10),s.Lb(3,"ion-button",12),s.Jb(4,"ion-icon",13),s.ic(5," New Trip "),s.Kb(),s.Lb(6,"ion-button",14),s.Tb("click",(function(){return s.ec(t),s.Vb().updateTest()})),s.ic(7,"Update Test"),s.Kb(),s.Kb(),s.Kb(),s.Lb(8,"ion-row"),s.Lb(9,"ion-col",10),s.Lb(10,"h6"),s.ic(11),s.Wb(12,"currency"),s.Kb(),s.Kb(),s.Kb(),s.Lb(13,"ion-row"),s.Lb(14,"ion-col",10),s.hc(15,d,12,14,"ion-item",15),s.Kb(),s.Kb(),s.Kb()}if(2&t){const t=s.Vb();s.yb(3),s.ac("routerLink",s.bc(6,u)),s.yb(8),s.kc("Total amount to claim: ",s.Xb(12,3,t.totalToClaim,"\xa3"),""),s.yb(4),s.ac("ngForOf",t.orderedTrips)}}const L=[{path:"",component:(()=>{class t{constructor(t,o){this.dataService=t,this.userService=o,this.tabsValue="cost",this.isLoading=!1}ngOnInit(){this.tripsSubscription=this.dataService.trips.subscribe(t=>{this.isLoading=!0,setTimeout(()=>{this.retrievedTrips=t,this.orderedTrips=this.retrievedTrips.slice(0),this.tabsValue=document.querySelector("ion-segment").value,this.onFilterLoad(this.tabsValue),this.calculateTotal(t),this.isLoading=!1},2e3)})}ionViewWillEnter(){console.log("entering view"),console.log("firebase user",this.userService.user)}onFilterUpdate(t){console.log("filtering"),this.orderedTrips.sort("recent"===t.detail.value?(t,o)=>t.dateFrom<o.dateFrom?1:t.dateFrom>o.dateFrom?-1:0:(t,o)=>t.price<o.price?1:t.price>o.price?-1:0)}onFilterLoad(t){"recent"===t?(console.log("most recent"),this.orderedTrips.sort((t,o)=>t.dateFrom<o.dateFrom?1:t.dateFrom>o.dateFrom?-1:0)):(console.log("cost"),this.orderedTrips.sort((t,o)=>t.price<o.price?1:t.price>o.price?-1:0))}updateTest(){console.log("upadte test pressed"),this.dataService.updateTrip("craig_adam2k@hotmail.com","tor20200312","Toronto","Messing up the Raptors!",new Date("2010-03-30"),new Date("2018-03-30"),4e3)}calculateTotal(t){this.totalToClaim=0,t.forEach(t=>{console.log(t),this.totalToClaim+=t.price})}ngOnDestroy(){this.tripsSubscription&&this.tripsSubscription.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(s.Ib(a.a),s.Ib(b.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-all-trips"]],decls:17,vars:2,consts:[["slot","start"],["menu","m1"],["slot","primary"],["routerLink","/places/tabs/offers/new"],["name","add","slot","icon-only"],[1,"ion-padding"],["value","cost",3,"ionChange","ionLoad"],["value","cost"],["value","recent"],[4,"ngIf"],["size","12","size-sm","8","offset-sm","2",1,"ion-text-center"],["color","primary","id","spinner"],["color","primary",3,"routerLink"],["name","airplane-outline","slot","start"],[3,"click"],["detail","","approxItemHeight","70px",4,"ngFor","ngForOf"],["detail","","approxItemHeight","70px"],[3,"routerLink"],[1,"price"]],template:function(t,o){1&t&&(s.Lb(0,"ion-header"),s.Lb(1,"ion-toolbar"),s.Lb(2,"ion-buttons",0),s.Jb(3,"ion-menu-button",1),s.Kb(),s.Lb(4,"ion-title"),s.ic(5,"Trips"),s.Kb(),s.Lb(6,"ion-buttons",2),s.Lb(7,"ion-button",3),s.Jb(8,"ion-icon",4),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(9,"ion-content",5),s.Lb(10,"ion-segment",6),s.Tb("ionChange",(function(t){return o.onFilterUpdate(t)}))("ionLoad",(function(t){return o.onFilterUpdate(t)})),s.Lb(11,"ion-segment-button",7),s.ic(12,"Total Cost"),s.Kb(),s.Lb(13,"ion-segment-button",8),s.ic(14,"Most Recent"),s.Kb(),s.Kb(),s.hc(15,l,4,0,"ion-grid",9),s.hc(16,m,16,7,"ion-grid",9),s.Kb()),2&t&&(s.yb(15),s.ac("ngIf",o.isLoading),s.yb(1),s.ac("ngIf",!o.isLoading))},directives:[r.n,r.E,r.e,r.t,r.D,r.d,r.J,c.h,r.o,r.l,r.x,r.K,r.y,e.k,r.m,r.w,r.k,r.z,e.j,r.p,r.q],pipes:[e.c,e.e],styles:["h5[_ngcontent-%COMP%]{color:var(--ion-color-tertiary)}.price[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#spinner[_ngcontent-%COMP%]{margin-top:100px}"]}),t})()}];let h=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(o){return new(o||t)},imports:[[c.i.forChild(L)],c.i]}),t})(),g=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(o){return new(o||t)},imports:[[e.b,n.a,r.F,h]]}),t})()}}]);