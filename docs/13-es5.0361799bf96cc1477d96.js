!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{LtjO:function(n,o,i){"use strict";i.r(o),i.d(o,"AllTripsPageModule",(function(){return T}));var r=i("ofXK"),c=i("3Pt+"),a=i("TEn/"),s=i("tyNb"),b=i("fXoL"),u=i("R7Hv"),l=i("xdv0");function p(t,e){1&t&&(b.Lb(0,"ion-grid"),b.Lb(1,"ion-row"),b.Lb(2,"ion-col",10),b.Jb(3,"ion-spinner",11),b.Kb(),b.Kb(),b.Kb())}var d=function(t){return["/trip-details",t]};function f(t,e){if(1&t&&(b.Lb(0,"ion-item",16),b.Lb(1,"ion-label",17),b.Lb(2,"h2"),b.ic(3),b.Kb(),b.Lb(4,"h5"),b.ic(5),b.Wb(6,"date"),b.Wb(7,"date"),b.Kb(),b.Lb(8,"p"),b.ic(9),b.Kb(),b.Lb(10,"p",18),b.ic(11),b.Kb(),b.Kb(),b.Kb()),2&t){var n=e.$implicit;b.yb(1),b.ac("routerLink",b.cc(12,d,n.tripId)),b.yb(2),b.jc(n.location),b.yb(2),b.lc(" ",b.Xb(6,6,n.dateFrom,"dd/MM/yyyy")," - ",b.Xb(7,9,n.dateTo,"dd/MM/yyyy")," "),b.yb(4),b.jc(n.description),b.yb(2),b.kc("\xa3",n.price,"")}}var m=function(){return["/trip-new"]};function y(t,e){if(1&t){var n=b.Mb();b.Lb(0,"ion-grid"),b.Lb(1,"ion-row"),b.Lb(2,"ion-col",10),b.Lb(3,"ion-button",12),b.Jb(4,"ion-icon",13),b.ic(5," New Trip "),b.Kb(),b.Lb(6,"ion-button",14),b.Tb("click",(function(){return b.ec(n),b.Vb().updateTest()})),b.ic(7,"Update Test"),b.Kb(),b.Kb(),b.Kb(),b.Lb(8,"ion-row"),b.Lb(9,"ion-col",10),b.Lb(10,"h6"),b.ic(11),b.Wb(12,"currency"),b.Kb(),b.Kb(),b.Kb(),b.Lb(13,"ion-row"),b.Lb(14,"ion-col",10),b.hc(15,f,12,14,"ion-item",15),b.Kb(),b.Kb(),b.Kb()}if(2&t){var o=b.Vb();b.yb(3),b.ac("routerLink",b.bc(6,m)),b.yb(8),b.kc("Total amount to claim: ",b.Xb(12,3,o.totalToClaim,"\xa3"),""),b.yb(4),b.ac("ngForOf",o.orderedTrips)}}var L,g,h,v=[{path:"",component:(L=function(){function n(e,o){t(this,n),this.dataService=e,this.userService=o,this.tabsValue="cost",this.isLoading=!1}var o,i,r;return o=n,(i=[{key:"ngOnInit",value:function(){var t=this;this.tripsSubscription=this.dataService.trips.subscribe((function(e){t.isLoading=!0,setTimeout((function(){t.retrievedTrips=e,t.orderedTrips=t.retrievedTrips.slice(0),t.tabsValue=document.querySelector("ion-segment").value,t.onFilterLoad(t.tabsValue),t.calculateTotal(e),t.isLoading=!1}),2e3)}))}},{key:"ionViewWillEnter",value:function(){console.log("entering view"),console.log("firebase user",this.userService.user)}},{key:"onFilterUpdate",value:function(t){console.log("filtering"),this.orderedTrips.sort("recent"===t.detail.value?function(t,e){return t.dateFrom<e.dateFrom?1:t.dateFrom>e.dateFrom?-1:0}:function(t,e){return t.price<e.price?1:t.price>e.price?-1:0})}},{key:"onFilterLoad",value:function(t){"recent"===t?(console.log("most recent"),this.orderedTrips.sort((function(t,e){return t.dateFrom<e.dateFrom?1:t.dateFrom>e.dateFrom?-1:0}))):(console.log("cost"),this.orderedTrips.sort((function(t,e){return t.price<e.price?1:t.price>e.price?-1:0})))}},{key:"updateTest",value:function(){console.log("upadte test pressed"),this.dataService.updateTrip("craig_adam2k@hotmail.com","tor20200312","Toronto","Messing up the Raptors!",new Date("2010-03-30"),new Date("2018-03-30"),4e3)}},{key:"calculateTotal",value:function(t){var e=this;this.totalToClaim=0,t.forEach((function(t){console.log(t),e.totalToClaim+=t.price}))}},{key:"ngOnDestroy",value:function(){this.tripsSubscription&&this.tripsSubscription.unsubscribe()}}])&&e(o.prototype,i),r&&e(o,r),n}(),L.\u0275fac=function(t){return new(t||L)(b.Ib(u.a),b.Ib(l.a))},L.\u0275cmp=b.Cb({type:L,selectors:[["app-all-trips"]],decls:17,vars:2,consts:[["slot","start"],["menu","m1"],["slot","primary"],["routerLink","/places/tabs/offers/new"],["name","add","slot","icon-only"],[1,"ion-padding"],["value","cost",3,"ionChange","ionLoad"],["value","cost"],["value","recent"],[4,"ngIf"],["size","12","size-sm","8","offset-sm","2",1,"ion-text-center"],["color","primary","id","spinner"],["color","primary",3,"routerLink"],["name","airplane-outline","slot","start"],[3,"click"],["detail","","approxItemHeight","70px",4,"ngFor","ngForOf"],["detail","","approxItemHeight","70px"],[3,"routerLink"],[1,"price"]],template:function(t,e){1&t&&(b.Lb(0,"ion-header"),b.Lb(1,"ion-toolbar"),b.Lb(2,"ion-buttons",0),b.Jb(3,"ion-menu-button",1),b.Kb(),b.Lb(4,"ion-title"),b.ic(5,"Trips"),b.Kb(),b.Lb(6,"ion-buttons",2),b.Lb(7,"ion-button",3),b.Jb(8,"ion-icon",4),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Lb(9,"ion-content",5),b.Lb(10,"ion-segment",6),b.Tb("ionChange",(function(t){return e.onFilterUpdate(t)}))("ionLoad",(function(t){return e.onFilterUpdate(t)})),b.Lb(11,"ion-segment-button",7),b.ic(12,"Total Cost"),b.Kb(),b.Lb(13,"ion-segment-button",8),b.ic(14,"Most Recent"),b.Kb(),b.Kb(),b.hc(15,p,4,0,"ion-grid",9),b.hc(16,y,16,7,"ion-grid",9),b.Kb()),2&t&&(b.yb(15),b.ac("ngIf",e.isLoading),b.yb(1),b.ac("ngIf",!e.isLoading))},directives:[a.n,a.E,a.e,a.t,a.D,a.d,a.J,s.h,a.o,a.l,a.x,a.K,a.y,r.k,a.m,a.w,a.k,a.z,r.j,a.p,a.q],pipes:[r.c,r.e],styles:["h5[_ngcontent-%COMP%]{color:var(--ion-color-tertiary)}.price[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#spinner[_ngcontent-%COMP%]{margin-top:100px}"]}),L)}],K=((h=function e(){t(this,e)}).\u0275mod=b.Gb({type:h}),h.\u0275inj=b.Fb({factory:function(t){return new(t||h)},imports:[[s.i.forChild(v)],s.i]}),h),T=((g=function e(){t(this,e)}).\u0275mod=b.Gb({type:g}),g.\u0275inj=b.Fb({factory:function(t){return new(t||g)},imports:[[r.b,c.a,a.F,K]]}),g)}}])}();